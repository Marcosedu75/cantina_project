{% extends "base.html" %}

{% block title %}
Atualizar Status do Pedido
{% endblock %}

{% block body_class %}status-update-body{% endblock %} 

{% block content %}
<div class="status-update-container">
    <h2 class="status-update-title">Atualizar Status do Pedido #{{ pedido.id }}</h2>

    <div class="status-context-info">
        <p>Cliente: <strong>{{ pedido.usuario.get_full_name|default:pedido.usuario.username }}</strong></p>
        <p>Data do Pedido: <strong>{{ pedido.data_pedido|date:"d/m/Y H:i" }}</strong></p>
    </div>

    <div class="current-status-box">
        <p>Status Atual:</p> 
        <span class="current-status-display">{{ pedido.get_status_display }}</span>
    </div>

    <form action="{% url 'atualizar_status' pedido.id %}" method="post" class="status-update-form">
        {% csrf_token %}
        <div class="form-group-status">
            <label for="status" class="form-label-status">Selecionar Novo Status:</label>
            <select name="status" id="status" class="form-select-status">
                {% for value, display_name in status_choices %}
                    <option value="{{ value }}" {% if value == pedido.status %}selected{% endif %}>
                        {{ display_name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-actions-status">
            <button type="submit" class="btn-submit-status">Atualizar Status</button>
            <a href="{% url 'listar' %}" class="btn-cancel-status">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}