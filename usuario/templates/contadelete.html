{% extends 'base.html' %}

{% block content %} 
  <h2>Confirmar exclusão de conta</h2>
  <p>Para confirmar a exclusão da sua conta, digite <b>delete</b> no campo abaixo:</p>

  <form method="post" id="deleteForm">
    {% csrf_token %}
    <input type="text" name="confirm_text" placeholder="Digite 'delete' para confirmar" required>
    <br><br>
    <button type="submit" class="btn btn-danger">Excluir Conta</button>
    <a href="{% url 'perfil' %}" class="btn btn-secondary">Cancelar</a>
  </form>

  <script>
    document.getElementById("deleteForm").addEventListener("submit", function(event) {
      const confirmText = document.querySelector("input[name='confirm_text']").value.trim();
      if (confirmText !== "delete") {
        event.preventDefault();
        alert("Você precisa digitar 'delete' para confirmar a exclusão da conta.");
      }
    });
  </script>
{% endblock %}
