
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

{% if messages %}
  <div>
    {% for message in messages %}
      <p class="alert alert-{{ message.tags }}">
        {{ message|safe }}
      </p>
    {% endfor %}
  </div>
{% endif %}

<h2>Meu Perfil</h2>

<!-- Seção de informações do usuário -->
<h4>Informações da Conta</h4>
<p><b>Usuário:</b> {{ usuario.user.username }}</p>
<p><b>Nome completo:</b> {{ usuario.user.get_full_name|default:"Não informado" }}</p>
<p><b>Data de cadastro:</b> {{ usuario.user.date_joined|date:"d/m/Y" }}</p>
<p><b>Status:</b> {% if usuario.user.is_active %}Ativo{% else %}Inativo{% endif %}</p>

<hr>

<!-- Seção para gerenciamento da foto -->
<h4>Foto de Perfil</h4>
{% if usuario.foto %}
  <img src="{{ usuario.foto.url }}" alt="Foto de perfil" width="120" height="120">
{% else %}
  <span class="material-icons" style="font-size: 120px;">person</span>
{% endif %}

<form method="post" enctype="multipart/form-data" action="{% url 'perfil' %}">
    {% csrf_token %}
    <p>
        <label for="foto">Enviar nova foto:</label><br>
        <input type="file" name="foto" accept="image/*" id="foto">
    </p>
    {% if usuario.foto %}
    <p>
        <input type="checkbox" name="remover_foto" id="remover_foto">
        <label for="remover_foto">Remover foto atual</label>
    </p>
    {% endif %}
    <button type="submit">Atualizar Foto</button>
</form>

<hr>

<!-- Seção de Ações -->
<h4>Ações</h4>
{% if request.user.usuario.role == 'cantineiro' %}
  <a href="{% url 'dashboard_cantineiro' %}">Voltar ao Painel</a>
{% elif request.user.usuario.role == 'aluno' %}
  <a href="{% url 'painel_usuario' %}">Voltar ao Painel</a>
{% endif %}
<br>
<a href="{% url 'deletar_conta' %}">Deletar Conta</a>
